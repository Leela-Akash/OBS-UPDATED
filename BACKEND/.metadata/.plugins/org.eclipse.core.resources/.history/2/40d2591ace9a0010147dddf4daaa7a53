package com.banking.sdp.backend.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import com.banking.sdp.backend.model.Staff;
import com.banking.sdp.backend.service.StaffService;

@RestController
@RequestMapping("/staff")
@CrossOrigin("*")
public class StaffController {

    @Autowired
    private StaffService staffService;

    @PostMapping("/login")
    public ResponseEntity<?> login(@RequestBody Staff staff) {
        Staff s = staffService.checkStaffLogin(staff.getUsername(), staff.getPassword());
        if (s != null) return ResponseEntity.ok(s);
        else return ResponseEntity.status(401).body("Invalid Username or Password");
    }

    @GetMapping("/profile/{staffId}")
    public ResponseEntity<?> getProfile(@PathVariable Long staffId) {
        Staff s = staffService.getStaffProfile(staffId);
        if (s != null) return ResponseEntity.ok(s);
        else return ResponseEntity.status(404).body("Staff Not Found");
    }
}

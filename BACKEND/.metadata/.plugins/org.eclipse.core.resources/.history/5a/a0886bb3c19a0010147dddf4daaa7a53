@GetMapping("/customer/{customerId}/statement")
public ResponseEntity<byte[]> downloadStatement(
        @PathVariable Long customerId,
        @RequestParam String fromDate,
        @RequestParam String toDate) {

    try {
        Customer customer = customerService.getCustomerById(customerId);
        if (customer == null) return ResponseEntity.notFound().build();

        java.time.LocalDateTime start = java.time.LocalDate.parse(fromDate).atStartOfDay();
        java.time.LocalDateTime end = java.time.LocalDate.parse(toDate).atTime(23, 59, 59);

        byte[] pdfBytes = transactionService.generatePdfStatement(customer, start, end);

        return ResponseEntity.ok()
                .header("Content-Disposition", "attachment; filename=\"Bank_Statement.pdf\"")
                .contentType(org.springframework.http.MediaType.APPLICATION_PDF)
                .body(pdfBytes);

    } catch (Exception e) {
        return ResponseEntity.status(500).build();
    }
}
